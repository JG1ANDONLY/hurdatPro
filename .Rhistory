df <- read.csv("https://raw.github.coecis.cornell.edu/jsg342/statcomp2023/main/datasets/hurdat2-1851-2022-040723.txt?token=GHSAT0AAAAAAAAANMFJFLLBJ4IEUUAWAUHKZCVQECQ", header = FALSE)
View(df)
hurdat <- data.frame(matrix(NA, nrow = 0, ncol = ncol(df)+2))
View(hurdat)
hurdat <- data.frame(matrix(NA, nrow = 0, ncol = ncol(df)+2))
colnames(hurdat) <- c("storm.id", "storm.date", "date", "time","record.identifier",
"sys.status", "lat", "long", "max.sus.wind",
"min.p", "rofne34", "rofse34","rofsw34", "rofnw34",
"rofne50", "rofse50","rofsw50", "rofnw50",
"rofne64", "rofse54","rofsw64", "rofnw64", "r.max.wind")
index <- which( substr( hurdat$V1, 1, 2 ) == "AL")
View(hurdat)
View(df)
View(df)
View(df)
index <- which( substr( df$V1, 1, 2 ) == "AL")
al.index
al.index <- which( substr( df$V1, 1, 2 ) == "AL")
for (al in 2:length(al.index)) {
start <- al.index[al - 1] + 1
end <- al.index[al] - 1
hur_code <- dat$V1[start - 1]
hur_name <- dat$V2[end + 1]
gap <- al.index[al] - al.index[al-1] - 1
k0 <- k+gap-1
hurdat[k:k0, ] <- cbind(hur_code, hur_name, dat[beg:end, ])
k <- k+gap
}
accu <- 1
for (al in 2:length(al.index)) {
start <- al.index[al - 1] + 1
end <- al.index[al] - 1
hur_code <- df$V1[start - 1]
hur_name <- df$V2[end + 1]
gap <- al.index[al] - al.index[al-1] - 1
accu0 <- accu+gap-1
hurdat[accu:accu0, ] <- cbind(hur_code, hur_name, df[start:end, ])
accu <- accu+gap
}
hurdat[accu:53972, ] <- cbind(df$V1[al.index[1952]], df$V2[al.index[1952]], df[55899:55924,])
accu <- 1
for (al in 2:length(al.index)) {
start <- al.index[al - 1] + 1
end <- al.index[al] - 1
hur_code <- df$V1[start - 1]
hur_name <- df$V2[end + 1]
gap <- al.index[al] - al.index[al-1] - 1
accu0 <- accu+gap-1
hurdat[accu:accu0, ] <- cbind(hur_code, hur_name, df[start:end, ])
accu <- accu+gap
}
hurdat[accu:53972, ] <- cbind(df$V1[al.index[1952]], df$V2[al.index[1952]], df[55899:55924,])
for (al in 2:length(al.index)) {
start <- al.index[al - 1] + 1
end <- al.index[al] - 1
hur_code <- df$V1[start - 1]
hur_name <- df$V2[end + 1]
gap <- al.index[al] - al.index[al-1] - 1
accu0 <- accu+gap-1
hurdat[accu:accu0, ] <- cbind(hur_code, hur_name, df[start:end, ])
accu <- accu+gap
}
hurdat[accu:53972, ] <- cbind(df$V1[al.index[1952]], df$V2[al.index[1952]], df[55899:55924,])
hurdat <- data.frame(matrix(NA, nrow = 0, ncol = ncol(df) + 2))
colnames(hurdat) <- c("id", "name", "date", "time","event",
"status", "latitude", "longitude", "max.wind",
"min.pressure", "ne34", "se34","sw34", "nw34",
"ne50", "se50","sw50", "nw50",
"ne64", "se64","sw64", "nw64", "r.max.wind")
al.index <- which( substr( df$V1, 1, 2 ) == "AL")
accu <- 1
for (al in 2:length(al.index)) {
start <- al.index[al - 1] + 1
end <- al.index[al] - 1
hur_code <- df$V1[start - 1]
hur_name <- df$V2[end + 1]
incre <- al.index[al] - al.index[al-1] - 1
accu0 <- accu+incre-1
hurdat[accu:accu0, ] <- cbind(hur_code, hur_name, df[start:end, ])
accu <- accu+incre
}
hurdat[accu:53972, ] <- cbind(df$V1[al.index[1952]], df$V2[al.index[1952]], df[55899:55924,])
View(hurdat)
?save
save(hurdat, file = "hurdat.RData")
getwd()
load("~/data/hurdat.RData")
load("/Users/guozhongyi/Desktop/hurdatPro/data/hurdat.RData")
View(hurdat)
View(hurdat)
?load
library(ggplot2)
# filter HURDAT2 dataset by selected storm IDs
hurdat2_filtered <- hurdat2[hurdat2$id %in% storm.ids, ]
hurdat <- load("/Users/zhongyiguo/desktop/hurdatPro/data/hurdat.RData")
load("/Users/guozhongyi/Desktop/hurdatPro/data/hurdat.RData")
View(hurdat)
df <- read.csv("https://raw.github.coecis.cornell.edu/jsg342/statcomp2023/main/datasets/hurdat2-1851-2022-040723.txt?token=GHSAT0AAAAAAAAANMFJFLLBJ4IEUUAWAUHKZCVQECQ", header = FALSE)
View(hurdat)
View(df)
hurdat <- data.frame(matrix(NA, nrow = 0, ncol = ncol(df) + 2))
colnames(hurdat) <- c("id", "name", "date", "time","event", "status", "latitude",
"longitude", "max.wind", "min.pressure", "ne34", "se34",
"sw34", "nw34", "ne50", "se50","sw50", "nw50", "ne64",
"se64","sw64", "nw64", "r.max.wind")
View(hurdat)
al.index <- which( substr( df$V1, 1, 2 ) == "AL")
substr( df$V1, 1, 2 )
View(df)
typeof(df[, 1])
grep("^AL", df$V1)
test <- grep("^AL", df$V1)
test == al.index
sum(al.index == test)
?read.csv
df <- read.csv("https://raw.github.coecis.cornell.edu/jsg342/statcomp2023/main/datasets/hurdat2-1851-2022-040723.txt?token=GHSAT0AAAAAAAAANMFJFLLBJ4IEUUAWAUHKZCVQECQ", header = FALSE, na.strings = "")
View(df)
View(df)
df <- read.csv("https://raw.github.coecis.cornell.edu/jsg342/statcomp2023/main/datasets/hurdat2-1851-2022-040723.txt?token=GHSAT0AAAAAAAAANMFJFLLBJ4IEUUAWAUHKZCVQECQ", header = FALSE)
View(df)
df <- read.csv("https://raw.github.coecis.cornell.edu/jsg342/statcomp2023/main/datasets/hurdat2-1851-2022-040723.txt?token=GHSAT0AAAAAAAAANMFJFLLBJ4IEUUAWAUHKZCVQECQ", header = FALSE, na.strings = "")
View(df)
hurdat <- data.frame(matrix(NA, nrow = 0, ncol = ncol(df) + 2))
colnames(hurdat) <- c("id", "name", "date", "time","event", "status", "latitude",
"longitude", "max.wind", "min.pressure", "ne34", "se34",
"sw34", "nw34", "ne50", "se50","sw50", "nw50", "ne64",
"se64","sw64", "nw64", "r.max.wind")
al.index <- grep("^AL", df$V1)
storms <- lapply(seq_along(al.index)[-1], function(i) {
start <- al.index[i - 1] + 1
end <- al.index[i] - 1
code <- df$V1[start - 1]
name <- df$V2[start - 1]
data <- df[start:end, ]
data$code <- code
data$name <- name
data
})
View(storms)
hurdat <- do.call(rbind, storms)
View(hurdat)
hurdat[accu:53972, ] <- cbind(df$V1[al.index[1952]], df$V2[al.index[1952]],
df[55899:55924,])
hurdat <- data.frame(matrix(NA, nrow = 0, ncol = ncol(df) + 2))
colnames(hurdat) <- c("id", "name", "date", "time","event", "status", "latitude",
"longitude", "max.wind", "min.pressure", "ne34", "se34",
"sw34", "nw34", "ne50", "se50","sw50", "nw50", "ne64",
"se64","sw64", "nw64", "r.max.wind")
al.index <- grep("^AL", df$V1)
accu <- 1
for (index in 2:length(al.index)) {
start <- al.index[index - 1] + 1
end <- al.index[index] - 1
code <- df$V1[start - 1]
name <- df$V2[start - 1]
incre <- al.index[index] - al.index[index - 1] - 1
accu0 <- accu + incre-1
hurdat[accu:accu0, ] <- cbind(code, name, df[start:end, ])
accu <- accu+incre
}
hurdat <- data.frame(matrix(NA, nrow = 0, ncol = ncol(df) + 2))
colnames(hurdat) <- c("id", "name", "date", "time","event", "status", "latitude",
"longitude", "max.wind", "min.pressure", "ne34", "se34",
"sw34", "nw34", "ne50", "se50","sw50", "nw50", "ne64",
"se64","sw64", "nw64", "r.max.wind")
al.index <- grep("^AL", df$V1)
storms <- lapply(seq_along(al.index)[-1], function(i) {
start <- al.index[i - 1] + 1
end <- al.index[i] - 1
code <- df$V1[start - 1]
name <- df$V2[start - 1]
data <- df[start:end, ]
data$code <- code
data$name <- name
data
})
hurdat1 <- do.call(rbind, storms)
hurdat[53947:53972, ] <- cbind(df$V1[al.index[1952]], df$V2[al.index[1952]],
df[55899:55924,])
View(hurdat)
hurdat <- data.frame(matrix(NA, nrow = 0, ncol = ncol(df) + 2))
colnames(hurdat) <- c("id", "name", "date", "time","event", "status", "latitude",
"longitude", "max.wind", "min.pressure", "ne34", "se34",
"sw34", "nw34", "ne50", "se50","sw50", "nw50", "ne64",
"se64","sw64", "nw64", "r.max.wind")
al.index <- grep("^AL", df$V1)
storms <- lapply(seq_along(al.index)[-1], function(i) {
start <- al.index[i - 1] + 1
end <- al.index[i] - 1
code <- df$V1[start - 1]
name <- df$V2[start - 1]
data <- df[start:end, ]
data$code <- code
data$name <- name
data
})
hurdat <- do.call(rbind, storms)
hurdat[53947:53972, ] <- cbind(df$V1[al.index[1952]], df$V2[al.index[1952]],
df[55899:55924,])
View(hurdat)
df <- read.csv("https://raw.github.coecis.cornell.edu/jsg342/statcomp2023/main/datasets/hurdat2-1851-2022-040723.txt?token=GHSAT0AAAAAAAAANMFJFLLBJ4IEUUAWAUHKZCVQECQ", header = FALSE, na.strings = "")
al.index <- grep("^AL", df$V1)
storms <- lapply(seq_along(al.index)[-1], function(i) {
start <- al.index[i - 1] + 1
end <- al.index[i] - 1
code <- df$V1[start - 1]
name <- df$V2[start - 1]
data <- df[start:end, ]
data$code <- code
data$name <- name
data
})
hurdat <- do.call(rbind, storms)
hurdat[53947:53972, ] <- cbind(df$V1[al.index[1952]], df$V2[al.index[1952]],
df[55899:55924,])
View(hurdat)
hurdat <- data.frame(matrix(NA, nrow = 0, ncol = ncol(df) + 2))
colnames(hurdat) <- c("id", "name", "date", "time","event", "status", "latitude",
"longitude", "max.wind", "min.pressure", "ne34", "se34",
"sw34", "nw34", "ne50", "se50","sw50", "nw50", "ne64",
"se64","sw64", "nw64", "r.max.wind")
al.index <- grep("^AL", df$V1)
accu <- 1
for (index in 2:length(al.index)) {
start <- al.index[index - 1] + 1
end <- al.index[index] - 1
code <- df$V1[start - 1]
name <- df$V2[start - 1]
incre <- al.index[index] - al.index[index - 1] - 1
accu0 <- accu + incre-1
hurdat[accu:accu0, ] <- cbind(code, name, df[start:end, ])
accu <- accu+incre
}
hurdat[53947:53972, ] <- cbind(df$V1[al.index[1952]], df$V2[al.index[1952]],
df[55899:55924,])
View(hurdat)
hurdat <- replace(hurdat, hurdat %in% c(-99, -999), NA)
?gsub
hurdat$numeric.latitude <- as.numeric(gsub("[^0-9\\.]", "", hurdat$latitude))
hurdat$numeric.longitude <- 360 - as.numeric(gsub("[^0-9\\.]", "", hurdat$longitude))
View(hurdat)
View(hurdat)
hurdat[hurdat == -99] <- NA
hurdat[hurdat == -999] <- NA
View(hurdat)
save(hurdat, file = "hurdat.RData")
df <- read.csv("https://raw.github.coecis.cornell.edu/jsg342/statcomp2023/main/datasets/hurdat2-1851-2022-040723.txt?token=GHSAT0AAAAAAAAANMFJFLLBJ4IEUUAWAUHKZCVQECQ", header = FALSE, na.strings = "")
hurdat <- data.frame(matrix(NA, nrow = 0, ncol = ncol(df) + 2))
colnames(hurdat) <- c("id", "name", "date", "time","event", "status", "latitude",
"longitude", "max.wind", "min.pressure", "ne34", "se34",
"sw34", "nw34", "ne50", "se50","sw50", "nw50", "ne64",
"se64","sw64", "nw64", "r.max.wind")
al.index <- grep("^AL", df$V1)
accu <- 1
for (index in 2:length(al.index)) {
start <- al.index[index - 1] + 1
end <- al.index[index] - 1
code <- df$V1[start - 1]
name <- df$V2[start - 1]
incre <- al.index[index] - al.index[index - 1] - 1
accu0 <- accu + incre-1
hurdat[accu:accu0, ] <- cbind(code, name, df[start:end, ])
accu <- accu+incre
}
hurdat[53947:53972, ] <- cbind(df$V1[al.index[1952]], df$V2[al.index[1952]],
df[55899:55924,])
hurdat[hurdat == -99] <- NA
hurdat[hurdat == -999] <- NA
hurdat$numeric.latitude <- as.numeric(gsub("[^0-9\\.]", "", hurdat$latitude))
hurdat$numeric.longitude <- 360 - as.numeric(gsub("[^0-9\\.]", "", hurdat$longitude))
save(hurdat, file = "hurdat.RData")
library(hurdatPro)
load("/Users/zhongyiguo/desktop/hurdatPro/data/hurdat.RData")
getwd()
setwd("/Users/guozhongyi/Desktop/hurdatPro/data/")
load("hurdat.RData")
load("hurdat.RData")
path <- system.file("data", "hurdat.RData", package = "hurdatPro")
library(ggplot2)
library(maps)
setwd("/Users/guozhongyi/Desktop/hurdatPro")
library(devtools)
devtools::build()
install.packages("mypackage_0.1.0.tar.gz", repos = NULL, type = "source")
install.packages("hurdatPro_0.0.0.9000.tar.gz", repos = NULL, type = "source")
setwd("/Users/guozhongyi/Desktop/")
install.packages("hurdatPro_0.0.0.9000.tar.gz", repos = NULL, type = "source")
library(hurdatPro)
storm.map(1)
ls("package:hurdatPro")
setwd("/Users/guozhongyi/Desktop/hurdatPro")
devtools::build()
install.packages("hurdatPro_0.0.0.9000.tar.gz", repos = NULL, type = "source")
setwd("/Users/guozhongyi/Desktop/")
install.packages("hurdatPro_0.0.0.9000.tar.gz", repos = NULL, type = "source")
library(hurdatPro)
storm_map()
load(hurdat)
load(hurdat.RData)
load("hurdat.RData")
remove.packages("hurdatPro")
?filter
?filter
??filter
View(hurdat)
load(hurdat)
getwd()
load("/Users/guozhongyi/Desktop/hurdatPro/data/hurdat.RData")
library(ggplot2)
library(maps)
View(hurdat)
library(testthat)
